<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/geoloc.css" />
        <title>Hey you</title>
		<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDRU_hzB5XTYUQ5vWe1dpHffk053tR4Sg&sensor=false">
    </script>
	<script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
		   <script type="text/javascript" charset="utf-8">

    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    //
	
	    // device APIs are available
    function onDeviceReady() {
	// Add event listener to the back button
        document.addEventListener("backbutton", backButtonHandler, false);
		navigator.geolocation.getCurrentPosition(onSuccess, onError);
    }
	
	
	function backButtonHandler(e )
   {
 
      if( $("#adresses").length > 0 )
      {
         // Code to exit app
         navigator.app.exitApp();
      }
      else
      {
        // Code to navigate to the history action
         navigator.app.backHistory();
      }
}
	
	
	

    // onSuccess Geolocation
    //
    function onSuccess(position) {
        var element = document.getElementById('geolocation');
        element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                            'Longitude: '          + position.coords.longitude             + '<br />' +
                            'Altitude: '           + position.coords.altitude              + '<br />' +
                            'Accuracy: '           + position.coords.accuracy              + '<br />' +
                            'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                            'Heading: '            + position.coords.heading               + '<br />' +
                            'Speed: '              + position.coords.speed                 + '<br />' +
                            'Timestamp: '          + position.timestamp                    + '<br />';
							var longitude = position.coords.longitude;
							var latitude = position.coords.latitude;
    }

    // onError Callback receives a PositionError object
    //
    //function onError(error) {
     //   alert('code: '    + error.code    + '\n' +
     //         'message: ' + error.message + '\n');
   // }
	
			
	// Mon code
	function findMyLocation() {
            //Check the network connection
        //    var networkConnection = navigator.network.connection.type;
         //   if (networkConnection != null) {
              //  Find your location
                navigator.geolocation.getCurrentPosition(onSuccess, onError);
				
          //  }
          //  else{
         //      alert('Please check your network connection and try again.');
         //   }
        
         
       /*function getDetails(latitude, longitude) {
            var url = "http://maps.googleapis.com/maps/api/geocode/json?latlng="+latitude+","+longitude+"&sensor=false";
            $.getJSON(url, function(data) {
                var formatted_address = data['results'][0]['formatted_address'];
                htmlData =  'Latitude : ' + latitude + '<br/>';
                htmlData += 'Longitude : ' + longitude + '<br/>';
                htmlData += 'Location : ' + formatted_address;
                $("#location").html('<a href="#" class="btn" onclick="drawMap('+latitude+', '+longitude+');">'+htmlData+'</a>');
            });
        }

        function drawMap(latitude, longitude) {
            var centerLocation = new google.maps.LatLng(latitude, longitude);
 
            var myOptions = {
                center: centerLocation,
                zoom: 16,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
 
            map_element = document.getElementById("map-canvas");
            map = new google.maps.Map(map_element, myOptions);
 
            var marker = new google.maps.Marker({
                position: centerLocation,
                title: "My Current Location!"
            });
            marker.setMap(map);

            var mapwidth = $(window).width();
            var mapheight = $(window).height();
            $("#map_canvas").height(mapheight);
            $("#map_canvas").width(mapwidth);
            google.maps.event.trigger(map, 'resize');
        };/*/

	
	};
	
	function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(48.856614, 2.3522219000000177),
          zoom: 16
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
      }
      google.maps.event.addDomListener(window, 'load', initialize);


    </script>

    </head>
    <body>

		<div align="center">
            <a href="#" class="btn" onclick="findMyLocation();">Find My Location</a>
            <p id="location"></p>
        </div>
		<p id="geolocation">Finding geolocation...</p>

        <div id="map-canvas"></div>
		
        <script type="text/javascript" src="phonegap.js"></script>
        <!--<script type="text/javascript" src="js/index.js"></script>
		<script type="text/javascript">
            app.initialize();
        </script>-->
    </body>
</html>
